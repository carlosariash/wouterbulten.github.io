<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
{% if page.id and page.readingTime %}
<script type="text/javascript" src="{{ "/assets/js/readingTime.min.js" | prepend: site.baseurl  }}"></script>
{% endif %}
{%if page.chartjs %}
<script type="text/javascript" src="{{ "/assets/js/Chart.min.js" | prepend: site.baseurl  }}"></script>
{% endif %}
{%if page.math %}
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } },
  "HTML-CSS": {
    scale: 100
  },
  tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
  }
});
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
{% endif %}
<script>
(function ($) {
  "use strict";
  $(document).ready(function(){

    var $window = $(window),
    $image = $('.post-image-image, .teaserimage-image');
    $window.on('scroll', function() {
      var top = $window.scrollTop();

      if (top < 0 || top > 1500) { return; }
      $image
        .css('transform', 'translate3d(0px, '+top/3+'px, 0px)')
        .css('opacity', 1-Math.max(top/700, 0));
    });
    $window.trigger('scroll');

    /*var height = $('.article-image').height();
    $('.post-content').css('padding-top', height + 'px');*/

    $('a[href*=#]:not([href=#])').click(function() {
      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
       && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({ scrollTop: target.offset().top }, 500);
          return false;
        }
      }
    });

    {% if page.readingTime %}
    /* Calculates Reading Time */
    $('.post-content').readingTime({
        readingTimeTarget: '.post-reading-time',
        wordCountTarget: '.post-word-count',
    });
    {% endif %}
    {% if page.id %}
    /* Creates Captions from Alt tags */
    $(".post-content img").each(function() {
        /* Let's put a caption if there is one */
        if($(this).attr("alt") && !$(this).hasClass("emoji"))
          $(this).wrap('<figure class="image"><\/figure>')
          .after('<figcaption>'+$(this).attr("alt")+'<\/figcaption>');
    });
    {% endif %}
  });
}(jQuery));

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-11759031-3', 'auto');
ga('send', 'pageview');

</script>
<!-- include any additional post scripts -->
{% for script in page.post_scripts %}
{% capture script_file %}/assets/js/post-scripts/{{ script }}.js{% endcapture %}
<script type="text/javascript" src="{{ script_file | prepend: site.baseurl  }}"></script>
{% endfor %}
